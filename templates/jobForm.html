<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
  </head>
  <body>
    <h2 class="text-center border-bottom bg-light">{% if id %} Edit {% else %} New {% endif %} Job Form</h2>
    <div class="container" style="margin-top: 3rem;max-width: 100%;">
      <form action="{%url 'Basic'%}" method="POST">
        {% csrf_token %}

        <fieldset class="form-group border p-3">
          <legend class="w-auto px-2">Basic Details</legend>

          <table class="table table-striped">
            <tr>
              <th>{{form.firstname.label_tag}}</th>
              <td>{{form.firstname}}</td>
              <td></td>
              <th>{{form.lastname.label_tag}}</th>
              <td>{{form.lastname}}</td>
            </tr>
            <tr>
              <th>{{form.designation1.label_tag}}</th>
              <td>{{form.designation1}}</td>
              <td></td>
              <th>{{form.address1.label_tag}}</th>
              <td>{{form.address1}}</td>
            </tr>
            <tr>
              <th>{{form.email.label_tag}}</th>
              <td>{{form.email}}</td>
              <td></td>
              <th>{{form.address2.label_tag}}</th>
              <td>{{form.address2}}</td>
            </tr>
            <tr>
              <th>{{form.state.label_tag}}</th>
              <td>{{form.state}}</td>
              <td></td>
              <th>{{form.city.label_tag}}</th>
              <td>{{form.city}}</td>
            </tr>
            <tr>
              <th>{{form.gender.label_tag}}</th>
              <td>{{form.gender}}</td>
              <td></td>
              <th>{{form.zipcode.label_tag}}</th>
              <td>{{form.zipcode}}</td>
            </tr>
            <tr>
              <th>{{form.relation_status.label_tag}}</th>
              <td>{{form.relation_status}}</td>
              <td></td>
              <th>{{form.dob.label_tag}}</th>
              <td>{{form.dob}}</td>
            </tr>
          </table>
        </fieldset>




        <fieldset class="form-group border p-3">
          <legend class="w-auto px-2">Academic Details</legend>



          <table class="table table-striped" id="education-table">

            {% if id %}

            {% for i in academicData %}

            <tr>
              <th><label for="id_course_name">Course Name </label></th>
              <td><select name="course" id="id_course_name{{forloop.counter }}">
                <option value="">Select Course</option>
                {% for j in courseData %}
                
                
                {% if i.course_name == j %}
                
                          <option value="{{j}}" selected>
                              {{j}}
                              </option>
                              {% endif %}

                              {% if i.course_name != j %}
                              <option value="{{j}}">
                                {{j}}
                            </option>

                              {% endif %}

                          {% endfor %}
                  </select></td>

                  <td></td>



              <th><label for="{{i.board_name}}"><b>Board name</b></label></th>
              <td><input type="text" name="board_name" id="id_board_name{{forloop.counter }}" value="{{i.board_name}}"></td>

              </tr>
              <tr>
                
                <th><label for="id_passing_year"><b>Passing year</b></label></th>
                <td><input type="text" name="passing_year" id="id_passing_year{{forloop.counter }}"  value="{{i.passing_year}}"></td>
                <td></td>
                <td><label for="id_percentge"><b>Percentage</b></label></td>
                <td><input type="text" name="percentage" id="id_percentage{{forloop.counter }}"  value="{{i.percentage}}" ></td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="plusButton1"
                    value="Add"
                    onclick="naresh_click(flag=1)"
                  />
                </td>
                <td></td>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="minusButton1"
                    value="Remove"
                    onclick="naresh_click(flag=0)"
                    disabled
                  />
                </td>
              </tr>
            


            {% endfor %}
          


            {% else %}
            <tr>
              <th>{{education.course_name.label_tag}}</th>
              <td>{{education.course_name}}</td>
              <td></td>
              <th>{{education.board_name.label_tag}}</th>
              <td>{{education.board_name}}</td>
            </tr>

            <tr>
              <th>{{education.passing_year.label_tag}}</th>
              <td>{{education.passing_year}}</td>
              <td></td>
              <th>{{education.percentage.label_tag}}</th>
              <td>{{education.percentage}}</td>
            </tr>
            <tr>
              <td></td>
              <td>
                <input
                  type="button"
                  id="plusButton1"
                  value="Add"
                  onclick="naresh_click(flag=1)"
                />
              </td>
              <td></td>
              <td></td>
              <td>
                <input
                  type="button"
                  id="minusButton1"
                  value="Remove"
                  onclick="naresh_click(flag=0)"
                  disabled
                />
              </td>
            </tr>


            {% endif %}
          </table>
        </fieldset>



        <fieldset class="form-group border p-3">
          <legend class="w-auto px-2">Work Experiences</legend>

          <table class="table table-striped" id="work-table">

              {% if id %}

              {% for i in workData %}

            <tr>
              <th><label for="id_company_name"><b>Company name</b></label></th>
              <td><input type="text" name="company_name" id="id_company_name{{forloop.counter }}" value="{{i.company_name}}"></td>
              <td></td>
              <th><label for="id_designation"><b>Designation</b></label></th>
              <td><input type="text" name="designation" id="id_designation{{forloop.counter }}" value="{{i.designation}}"></td>

            </tr>

            <tr>
              <th><label for="id_start_date"><b>Start Date</b></label></th>
                        <td><input type="date" name="start_date" id="id_start_date{{forloop.counter }}" value= "{{i.start_date}}"></td>
                        <td></td>
                        <th><label for="id_end_date"><b>End Date</b></label></th>
                        <td><input type="date" name="end_date" id="id_end_date{{ forloop.counter }}"  value= "{{i.end_date}}"></td>
            </tr>
            <tr>
              <td></td>
              <td>
                <input
                  type="button"
                  id="plusButton2"
                  value="Add"
                  onclick="work(flag=1)"
                />
              </td>
              <td></td>
              <td></td>
              <td>
                <input
                  type="button"
                  id="minusButton2"
                  value="Remove"
                  onclick="work(flag=0)"
                  disabled
                />
              </td>
            </tr>
              {% endfor %}

            {% else %}

                
            <tr>
              <th>{{work_part.company_name.label_tag}}</th>
              <td>{{work_part.company_name}}</td>
              <td></td>
              <th>{{work_part.designation.label_tag}}</th>
              <td>{{work_part.designation}}</td>
            </tr>

            <tr>
              <th>{{work_part.start_date.label_tag}}</th>
              <td>{{work_part.start_date}}</td>
              <td></td>
              <th>{{work_part.end_date.label_tag}}</th>
              <td>{{work_part.end_date}}</td>
            </tr>
            <tr>
              <td></td>
              <td>
                <input
                  type="button"
                  id="plusButton2"
                  value="Add"
                  onclick="work(flag=1)"
                />
              </td>
              <td></td>
              <td></td>
              <td>
                <input
                  type="button"
                  id="minusButton2"
                  value="Remove"
                  onclick="work(flag=0)"
                  disabled
                />
              </td>
            </tr>

            {% endif %}




          </table>
        </fieldset>




         <fieldset class="form-group border p-3">
            <legend class="w-auto px-2">Language</legend>
            <table class="table table-striped">
             

              {% if id %}
      

              {% for j in languageData%}
       
           
         

            
              {% for i in userlang%}
           
              
            
              <tr>
        
                {% if j.language == i %}
           
               
                   
                <td><input type="checkbox"  name="language" id="language{{i.id}}" value="{{i}}"  class="language" onclick="check_validate_lan(this)" checked >

                  <label for="{{i}}">{{i}}</label></td>
                  
             {% if j.read_status %}
                 
                 
       
                <td><input type="checkbox" name="read_status" value="{{i}}" id="{{i}}1"  class="{{i}}" checked>
                  <label for="read">Read</label>
                  </td>
                  {% else %}

                  <td><input type="checkbox" name="read_status" value="{{i}}" id="{{i}}1"  class="{{i}}" >
                    <label for="read">Read</label>
                    </td>

                  {% endif %}

                  {% if j.write_status %}
                
                <td><input type="checkbox" name="write_status" value="{{i}}" id="{{i}}2" class="{{i}}" checked>
                <label for="write">Write</label>
                </td>

                {% else %}

                <td><input type="checkbox" name="write_status" value="{{i}}" id="{{i}}2" class="{{i}}" >
                  <label for="write">Write</label>
                  </td>
                {% endif %}

                {% if j.speak_status %}


                <td><input type="checkbox" name="speak_status" value="{{i}}" id="{{i}}3" class="{{i}}" checked> 
                  <label for="speak">Speak
                  </label>
                  </td>

                  {% else %}

                <td><input type="checkbox" name="speak_status" value="{{i}}" id="{{i}}3" class="{{i}}" > 
                  <label for="speak">Speak
                  </label>
                  </td>
                 
      
                  {% endif %}

                 
                  {% endif %}
              </tr>

          

            


          
             
              {% endfor %}
              {% endfor %}

              {%  for k in userlang %}

                {% if k in langlist %}
                {% else %}
                <tr>

                  <td><input type="checkbox"  name="language" id="language{{k.id}}" value="{{k}}"  class="language" onclick="check_validate_lan(this)"  >
                    <label for="{{k}}">{{k}}</label></td>
                    <td><input type="checkbox" name="read_status" value="{{k}}" id="{{k}}1"  class="{{k}}" >
                      <label for="read">Read</label>
                      </td>
                      <td><input type="checkbox" name="write_status" value="{{k}}" id="{{k}}2" class="{{k}}">
                        <label for="write">Write</label>
                        </td>
                        <td><input type="checkbox" name="speak_status" value="{{k}}" id="{{k}}3" class="{{k}}" > %
                          <label for="speak">Speak
                          </label>
                          </td>

                </tr>

                {% endif %}
              {% endfor %}

             

               
           



              {% else %}
              {% for i in userlang%}
        
              <tr>
                <td><input type="checkbox"  name="language" id="language{{i.id}}" value="{{i}}"  class="language" onclick="check_validate_lan(this)" >

                <label for="{{i}}">{{i}}</label></td>
       
                <td><input type="checkbox" name="read_status" value="{{i}}" id="{{i}}1"  class="{{i}}" disabled>
                  <label for="read">Read</label>
                  </td>
                
                <td><input type="checkbox" name="write_status" value="{{i}}" id="{{i}}2" class="{{i}}" disabled>
                <label for="write">Write</label>
                </td>

                <td><input type="checkbox" name="speak_status" value="{{i}}" id="{{i}}3" class="{{i}}" disabled> 
                  <label for="speak">Speak
                  </label>
                  </td>

              </tr>
               {% endfor %}

               {% endif%}
        



              </table>

              
              <legend class="w-auto px-2">Technology</legend>
              <table class="table table-striped">

                {% if id %}

                {% for tech in technologyData %}
                {% for element in usertech%}


                


                <tr>
                  {% if tech.tech_name == element %}
                  <td>
                    <input type="checkbox" name="tech_name" id="techlang{{element.id}}" class="technology"
                        value='{{element}}' oninput="allValidate()"
                        onclick="check_validate_tech(this)"  checked/>

                    <label for="{{element}}">{{element}}</label>
                  </td>

                  {% if tech.star == 'Beginner' %}

                  <td>
                    
                    <input type="radio"
                        name='{{element}}'
                        id='{{element}}1' class="techLang"
                        value="Beginner"  oninput="allValidate()" checked>
               
                    <label
                        for="{{element}}">Beginner</label>
                </td>
                {% else %}
                <td>
                    
                  <input type="radio"
                      name='{{element}}'
                      id='{{element}}1' class="techLang"
                      value="Beginner"  oninput="allValidate()" >
             
                  <label
                      for="{{element}}">Beginner</label>
              </td>
              {% endif %}
              


                <td>
                  {% if tech.star == 'Mediator' %}

                    <input type="radio"
                        name='{{element}}'
                        id='{{element}}2' class="techLang"
                        value="Mediator" oninput="allValidate()"  checked >
                    
                  {% else %}
                  <input type="radio"
                  name='{{element}}'
                  id='{{element}}2' class="techLang"
                  value="Mediator" oninput="allValidate()"  >

                  {% endif %}
                
                    <label
                        for="{{element}}">Mediator</label>
                </td>


                <td>
                  {% if tech.star == 'Expert' %}

                    <input type="radio"
                        name="{{element}}"
                        id='{{element}}3'  class="techLang"
                        value="Expert" oninput="allValidate()" checked>

                        {% else %}
                        <input type="radio"
                        name="{{element}}"
                        id='{{element}}3'  class="techLang"
                        value="Expert" oninput="allValidate()">


                        {% endif %}
               
                    <label
                        for="{{element.name}}">Expert</label>
                </td>


                {% endif %}
                </tr>
                {% endfor %}
                {% endfor %}




                {% for techelement in usertech %}

                {% if techelement in techlist %}
                {% else %}
                  <tr>
                    <td>
                      <input type="checkbox" name="tech_name" id="techlang{{techelement.id}}" class="technology"
                          value='{{techelement}}' oninput="allValidate()"
                          onclick="check_validate_tech(this)"  />
  
                      <label for="{{techelement}}">{{techelement}}</label>
                    </td>

                    <td>
                    
                      <input type="radio"
                          name='{{techelement}}'
                          id='{{techelement}}1' class="techLang"
                          value="Beginner"  oninput="allValidate()" >
                 
                      <label
                          for="{{techelement}}">Beginner</label>
                  </td>

                  <td>
                  
  
                     
                    <input type="radio"
                    name='{{techelement}}'
                    id='{{techelement}}2' class="techLang"
                    value="Mediator" oninput="allValidate()"  >
  
                  
                      <label
                          for="{{techelement}}">Mediator</label>
                  </td>

                  <td>
                  
  
                     
                    <input type="radio"
                    name='{{techelement}}'
                    id='{{techelement}}3' class="techLang"
                    value="Expert" oninput="allValidate()"  >
  
                  
                      <label
                          for="{{techelement}}">Expert</label>
                  </td>




                  </tr>

                {% endif %}
                {% endfor %}




                {% else %}


                {% for element in usertech%}


                <tr>
                  <td>
                    <input type="checkbox" name="tech_name" id="techlang{{element.id}}" class="technology"
                        value='{{element}}' oninput="allValidate()"
                        onclick="check_validate_tech(this)" />

                    <label for="{{element}}">{{element}}</label></td>
                  <td>
                    
                    <input type="radio"
                        name='{{element}}'
                        id='{{element}}1' class="techLang"
                        value="Beginner"  oninput="allValidate()" disabled >
               
                    <label
                        for="{{element}}">Beginner</label>
                </td>


                <td>
                    <input type="radio"
                        name='{{element}}'
                        id='{{element}}2' class="techLang"
                        value="Mediator" oninput="allValidate()" disabled >
                
                    <label
                        for="{{element}}">Mediator</label>
                </td>


                <td>
                    <input type="radio"
                        name="{{element}}"
                        id='{{element}}3'  class="techLang"
                        value="Expert" oninput="allValidate()" disabled  >
               
                    <label
                        for="{{element.name}}">Expert</label>
                </td>

                </tr>
                {% endfor %}

                {% endif %}
              </table>
        
          </fieldset> 


          <fieldset class="form-group border p-3">
            <legend class="w-auto px-2">Refrances Contact</legend>
  
            <table class="table table-striped" id="ref-table">


              {% if id %}
              {% for i in refranceData %}
              <tr>
                <th><label for="id_ref_name"><b>Name</b></label></th>
                <td><input type="text " name="rname<%=i+1%>" id="rname<%=i+1%>"  value= "<%=data2['refrances'][y]['ref_name']%>"></td>
                <td><label for="rcont<%=i+1%>"><b>Contact </b></label></td>
                <td><input type="text" name="rcont<%=i+1%>" id="rcont<%=i+1%>"  value= "<%=data2['refrances'][y]['ref_contact']%>"></td>
                <td><label for="rel<%=i+1%>"><b>Relation </b></label></td>
                <td><input type="text " name="rel<%=i+1%>" id="rel<%=i+1%>"  value= "<%=data2['refrances'][y]['relation']%>"></td>
             
            </tr>


              {% endfor %}


             

              {% else %}
              <tr>
                <th>{{refrances.ref_name.label_tag}}</th>
                <td>{{refrances.ref_name}}</td>
                <td></td>
                <th>{{refrances.ref_contact.label_tag}}</th>
                <td>{{refrances.ref_contact}}</td>
                <td></td>
                <th>{{refrances.relation.label_tag}}</th>
                <td>{{refrances.relation}}</td>
            
                <td></td>
                <td>
                  <input
                    type="button"
                    id="plusButton3"
                    value="Add"
                    onclick="reference(flag=1)"
                  />
                </td>
                <td></td>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="minusButton3"
                    value="Remove"
                    onclick="reference(flag=0)"
                    disabled
                  />
                </td>
              </tr>
              {% endif %}
            </table>
          </fieldset>


          <fieldset class="form-group border p-3">
            <legend class="w-auto px-2">Preferences</legend>
  
            <table class="table table-striped" id="ref-table">
              <tr>
                <th>{{preferance.prefered_location.label_tag}}</th>
                <td>{{preferance.prefered_location}}</td>
                <td></td>
                <th>{{preferance.notice_period.label_tag}}</th>
                <td>{{preferance.notice_period}}</td>
                <td></td>
                <th>{{preferance.department.label_tag}}</th>
                <td>{{preferance.department}}</td>
            
              
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <th>{{preferance.expected_ctc.label_tag}}</th>
                <td>{{preferance.expected_ctc}}</td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <th>{{preferance.current_ctc.label_tag}}</th>
                <td>{{preferance.current_ctc}}</td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </table>
          </fieldset>



        <div class="text-center" style="margin-top: 30px">
          <button type="submit" class="btn btn-success">Submit</button>
        </div>
      </form>
    </div>

    <script>
        var clk=2
      async function changeState(state) {
        console.log(state,"state")
        let data = await fetch(`http://127.0.0.1:5000/get/${state}`);
        let a = await data.json();

        document.getElementById("id_city").innerHTML = a.city;
      }


      let stateid=document.getElementById('id_state').value
      Window.onload = changeState(stateid);

      function naresh_click(flag) {
        console.log(flag,"flag");
        let table1 = document.getElementById("education-table");
        if (flag) {
          s = "";

          let row1 = document.createElement("tbody");
          row1.setAttribute("id", `row${clk}`);

          s +=
            `
            <br/><br/>
              <tr>
                <th>{{education.course_name.label_tag}}</th>
                <td>{{education.course_name}}</td>
                <td></td>
                <th>{{education.board_name.label_tag}}</th>
              
                <td><input type="text" name="board_name"</td>
              </tr>

              <tr>
                <th>{{education.passing_year.label_tag}}</th>
                <td>{{education.passing_year}}</td>
                <td></td>
                <th>{{education.percentage.label_tag}}</th>
                <td>{{education.percentage}}</td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="plusButton1"
                    value="Add"
                    onclick="naresh_click(flag=1)"
                  />
                </td>
                <td></td>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="minusButton1"
                    value="Remove"
                    onclick="naresh_click(flag=0)"
                    disabled
                  />
                </td>
              </tr>`;
          row1.innerHTML = s;
          table1.appendChild(row1);

          document.getElementById("minusButton1").disabled = false;
        } else {
          table1.removeChild(table1.lastElementChild);
          if (table1.firstElementChild == table1.lastElementChild) {
            document.getElementById("minusButton1").disabled = true;
          }
        }
        clk = clk + 1;
      }





function check_validate_lan(x) {

let id = x.id;
let lang = document.getElementById(id);
let langname = x.value;
if (lang.checked == true) {
    // document.getElementById(id).disabled = true;
    let element = document.getElementsByClassName(langname);
    for (let i = 0; i < element.length; i++) {
        if (element[i].disabled == true) {
            element[i].disabled = false;
        }
    }
  
}
else{
let element = document.getElementsByClassName(langname);
    for (let i = 0; i < element.length; i++) {
        if (element[i].disabled == false) {
            element[i].checked=false;
            element[i].disabled = true;
        }
    }
}

}


function check_validate_tech(x) {
    let t_id = x.id;
    let tech = document.getElementById(t_id);
    let techname = x.value;
    if (tech.checked == true) {
        // document.getElementById(t_id).disabled = true;
        let t_element = document.getElementsByName(techname);
        for (let i = 0; i < t_element.length; i++) {
            if (t_element[i].disabled == true) {
                t_element[i].disabled = false;
            }
        }
    }
    else{
        let t_element = document.getElementsByName(techname);
        for (let i = 0; i < t_element.length; i++) {
            if (t_element[i].disabled == false) {
                t_element[i].checked=false;
                t_element[i].disabled = true;
            }
        }
    }
}






function work(flag) {

let table3=document.getElementById("work-table");

if(flag){
s="";

let row1=document.createElement("tbody");

s =`
<br/><br/><tr>
              <th>{{work_part.company_name.label_tag}}</th>
              <td>{{work_part.company_name}}</td>
              <td></td>
              <th>{{work_part.designation.label_tag}}</th>
              <td>{{work_part.designation}}</td>
            </tr>

            <tr>
              <th>{{work_part.start_date.label_tag}}</th>
              <td>{{work_part.start_date}}</td>
              <td></td>
              <th>{{work_part.end_date.label_tag}}</th>
              <td>{{work_part.end_date}}</td>
            </tr>
            <tr>
              <td></td>
              <td>
                <input
                  type="button"
                  id="plusButton2"
                  value="Add"
                  onclick="work(flag=1)"
                />
              </td>
              <td></td>
              <td></td>
              <td>
                <input
                  type="button"
                  id="minusButton2"
                  value="Remove"
                  onclick="work(flag=0)"
                  disabled
                />
              </td>
            </tr>` 


row1.innerHTML=s;
table3.appendChild(row1);


document.getElementById("minusButton2").disabled= false;
}
else{

 table3.removeChild(table3.lastElementChild);
 if(table3.firstElementChild==table3.lastElementChild){
     
     document.getElementById("minusButton2").disabled= true;

 }

}

}




function reference() {
    let table5=document.getElementById("ref-table");

if(flag){
s="";

let row1=document.createElement("tbody");

s = `  <tr>
                <th>{{refrances.ref_name.label_tag}}</th>
                <td>{{refrances.ref_name}}</td>
                <td></td>
                <th>{{refrances.ref_contact.label_tag}}</th>
                <td>{{refrances.ref_contact}}</td>
                <td></td>
                <th>{{refrances.relation.label_tag}}</th>
                <td>{{refrances.relation}}</td>
            
                <td></td>
                <td>
                  <input
                    type="button"
                    id="plusButton3"
                    value="Add"
                    onclick="reference(flag=1)"
                  />
                </td>
                <td></td>
                <td></td>
                <td>
                  <input
                    type="button"
                    id="minusButton3"
                    value="Remove"
                    onclick="reference(flag=0)"
                    disabled
                  />
                </td>
              </tr>
`

row1.innerHTML=s;
table5.appendChild(row1);


document.getElementById("minusButton3").disabled= false;
}
else{
 
    table5.removeChild(table5.lastElementChild);
    if(table5.firstElementChild==table5.lastElementChild){
        
        document.getElementById("minusButton3").disabled= true;

    }
  
}
   
}

function hello(){
  console.log("hello")
}


    </script>
  </body>
</html>
